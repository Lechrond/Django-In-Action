function Banners(){}Banners.prototype.createBannnerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-item:last")):(t.prepend(a),t.find(".banner-item:first")),e.addImageSelectEvent(r),e.listenRemoveBannerEvent(r),e.listenSaveBannerEvent(r)},Banners.prototype.listenAddBannerEvent=function(){var n=this,e=$(".banner-list-group");$("#add-banner-btn").click(function(){6<=e.children().length?window.messageBox.showInfo("最多只能添加六张轮播图"):n.createBannnerItem()})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.listenRemoveBannerEvent=function(e){e.find("#close-btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"您确定要删除这个轮播图吗？",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("删除成功"))}})}}):e.remove()})},Banners.prototype.listenSaveBannerEvent=function(t){var n=t.find("#save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),s=t.find('span[class="priority"]'),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();xfzajax.post({url:d,data:{image_url:n,priority:e,link_to:a,pk:c},success:function(n){200===n.code&&(c?window.messageBox.showSuccess("轮播图修改成功"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("轮播图添加成功")),s.text("优先级："+e),window.location.reload())}})})},Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBannnerItem(t)}}})},Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsImNyZWF0ZUJhbm5uZXJJdGVtIiwiYmFubmVyIiwic2VsZiIsInRoaXMiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImJhbm5lckxpc3RHcm91cCIsIiQiLCJiYW5uZXJJdGVtIiwiYXBwZW5kIiwiZmluZCIsInByZXBlbmQiLCJhZGRJbWFnZVNlbGVjdEV2ZW50IiwibGlzdGVuUmVtb3ZlQmFubmVyRXZlbnQiLCJsaXN0ZW5TYXZlQmFubmVyRXZlbnQiLCJsaXN0ZW5BZGRCYW5uZXJFdmVudCIsImNsaWNrIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0luZm8iLCJpbWFnZSIsImltYWdlSW5wdXQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJhdHRyIiwiYmFubmVySWQiLCJ4ZnphbGVydCIsImFsZXJ0Q29uZmlybSIsInRleHQiLCJjb25maXJtQ2FsbGJhY2siLCJiYW5uZXJfaWQiLCJyZW1vdmUiLCJzaG93U3VjY2VzcyIsInNhdmVCdG4iLCJpbWFnZVRhZyIsInByaW9yaXR5VGFnIiwibGlua1RvVGFnIiwicHJpb3JpdHlTcGFuIiwiaW1hZ2VfdXJsIiwicHJpb3JpdHkiLCJ2YWwiLCJsaW5rX3RvIiwicGsiLCJsb2NhdGlvbiIsInJlbG9hZCIsImxvYWREYXRhIiwiZ2V0IiwiYmFubmVycyIsImkiLCJydW4iXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFdBSVRBLFFBQVFDLFVBQVVDLGtCQUFvQixTQUFVQyxHQUM1QyxJQUFJQyxFQUFPQyxLQUNQQyxFQUFNQyxTQUFTLGNBQWUsQ0FBQ0osT0FBVUEsSUFDekNLLEVBQWtCQyxFQUFFLHNCQUNwQkMsRUFBYSxLQUdi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QVFDLFVBQVUrRCxJQUFNLFdBQ1QzRCxLQUNOWSx1QkFETVosS0FFTnVELFlBR1RuRCxFQUFFLFlBQ2dCLElBQUlULFNBQ1ZnRSIsImZpbGUiOiJiYW5uZXJzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJhbm5lcnMoKSB7XHJcblxyXG59XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5jcmVhdGVCYW5ubmVySXRlbSA9IGZ1bmN0aW9uIChiYW5uZXIpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcImJhbm5lci1pdGVtXCIsIHtcImJhbm5lclwiOiBiYW5uZXJ9KTtcclxuICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKFwiLmJhbm5lci1saXN0LWdyb3VwXCIpO1xyXG4gICAgdmFyIGJhbm5lckl0ZW0gPSBudWxsO1xyXG4gICAgaWYgKGJhbm5lcikge1xyXG4gICAgICAgIGJhbm5lckxpc3RHcm91cC5hcHBlbmQodHBsKTtcclxuICAgICAgICBiYW5uZXJJdGVtID0gYmFubmVyTGlzdEdyb3VwLmZpbmQoXCIuYmFubmVyLWl0ZW06bGFzdFwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmFubmVyTGlzdEdyb3VwLnByZXBlbmQodHBsKTtcclxuICAgICAgICBiYW5uZXJJdGVtID0gYmFubmVyTGlzdEdyb3VwLmZpbmQoXCIuYmFubmVyLWl0ZW06Zmlyc3RcIik7XHJcbiAgICB9XHJcbiAgICBzZWxmLmFkZEltYWdlU2VsZWN0RXZlbnQoYmFubmVySXRlbSk7XHJcbiAgICBzZWxmLmxpc3RlblJlbW92ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgc2VsZi5saXN0ZW5TYXZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5saXN0ZW5BZGRCYW5uZXJFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKFwiLmJhbm5lci1saXN0LWdyb3VwXCIpO1xyXG4gICAgdmFyIGFkZEJ0biA9ICQoXCIjYWRkLWJhbm5lci1idG5cIik7XHJcbiAgICBhZGRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBiYW5uZXJMaXN0R3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKGxlbmd0aCA+PSA2KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dJbmZvKFwi5pyA5aSa5Y+q6IO95re75Yqg5YWt5byg6L2u5pKt5Zu+XCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHZhciB0cGwgPSB0ZW1wbGF0ZShcImJhbm5lci1pdGVtXCIpO1xyXG4gICAgICAgIC8vIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKFwiLmJhbm5lci1saXN0LWdyb3VwXCIpO1xyXG4gICAgICAgIC8vIGJhbm5lckxpc3RHcm91cC5wcmVwZW5kKHRwbCk7XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAvL+S9v+eUqGFydHRlbXBsYXRl5b+F6aG75re75Yqg5a6M5oiQ5ZCO5omN6IO957uR5a6a54K55Ye75LqL5Lu2562J5pON5L2cXHJcbiAgICAgICAgLy8gLy/pgJrov4fova7mkq3lm77nu4Tmib7liLDmlrDmt7vliqDnmoTova7mkq3lm75cclxuICAgICAgICAvLyB2YXIgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKFwiLmJhbm5lci1pdGVtOmZpcnN0XCIpO1xyXG4gICAgICAgIC8vIHNlbGYuYWRkSW1hZ2VTZWxlY3RFdmVudChiYW5uZXJJdGVtKTtcclxuICAgICAgICAvLyBzZWxmLmxpc3RlblJlbW92ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgICAgIC8vIHNlbGYubGlzdGVuU2F2ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgICAgIHNlbGYuY3JlYXRlQmFubm5lckl0ZW0oKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkSW1hZ2VTZWxlY3RFdmVudCA9IGZ1bmN0aW9uIChiYW5uZXJJdGVtKSB7XHJcbiAgICB2YXIgaW1hZ2UgPSBiYW5uZXJJdGVtLmZpbmQoJy50aHVtYm5haWwnKTtcclxuICAgIC8v5Zu+54mH5piv5LiN6IO95omT5byA5paH5Lu26YCJ5oup56qX5Y+j55qE77yM5Y+q6IO96YCa6L+HaW5wdXTmoIfnrb5cclxuICAgIHZhciBpbWFnZUlucHV0ID0gYmFubmVySXRlbS5maW5kKCcuaW1hZ2UtaW5wdXQnKTtcclxuICAgIGltYWdlLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+mAmui/h+eCueWHu+WbvueJh++8jOWunueOsGlucHV05qCH562+55qE54K55Ye7XHJcbiAgICAgICAgaW1hZ2VJbnB1dC5jbGljaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaW1hZ2VJbnB1dC5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcclxuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICAvL+WQjuerr+mAmui/h3JlcXVlc3QuRklMRVMuZ2V0KCdmaWxlJynojrflj5bmlofku7ZcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsIGZpbGUpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlLmF0dHIoJ3NyYycsIHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUubGlzdGVuUmVtb3ZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoYmFubmVySXRlbSkge1xyXG4gICAgdmFyIGNsb3NlQnRuID0gYmFubmVySXRlbS5maW5kKCcjY2xvc2UtYnRuJyk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcpO1xyXG4gICAgICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgICAgICB4ZnphbGVydC5hbGVydENvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgJ3RleHQnOiAn5oKo56Gu5a6a6KaB5Yig6Zmk6L+Z5Liq6L2u5pKt5Zu+5ZCX77yfJyxcclxuICAgICAgICAgICAgICAgICdjb25maXJtQ2FsbGJhY2snOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3VybCc6ICcvY21zL2RlbGV0ZV9iYW5uZXIvJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFubmVyX2lkJzogYmFubmVySWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lckl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoXCLliKDpmaTmiJDlip9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJhbm5lckl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5saXN0ZW5TYXZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoYmFubmVySXRlbSkge1xyXG4gICAgdmFyIHNhdmVCdG4gPSBiYW5uZXJJdGVtLmZpbmQoXCIjc2F2ZS1idG5cIik7XHJcbiAgICB2YXIgaW1hZ2VUYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCIudGh1bWJuYWlsXCIpO1xyXG4gICAgdmFyIHByaW9yaXR5VGFnID0gYmFubmVySXRlbS5maW5kKFwiaW5wdXRbbmFtZT0ncHJpb3JpdHknXVwiKTtcclxuICAgIHZhciBsaW5rVG9UYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdsaW5rX3RvJ11cIik7XHJcbiAgICB2YXIgcHJpb3JpdHlTcGFuID0gYmFubmVySXRlbS5maW5kKCdzcGFuW2NsYXNzPVwicHJpb3JpdHlcIl0nKTtcclxuICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cihcImRhdGEtYmFubmVyLWlkXCIpO1xyXG4gICAgdmFyIHVybCA9IFwiXCI7XHJcbiAgICAvLyDliKTmlq3lvZPliY3nmoTkv53lrZjmjInpkq7mmK/mm7TmlrDov5jmmK/mlrDlop7ova7mkq3lm77vvIznhLblkI7osIPnlKjnm7jlupTnmoR1cmxcclxuICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgIHVybCA9ICcvY21zL2VkaXRfYmFubmVyLyc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVybCA9IFwiL2Ntcy9hZGRfYmFubmVyL1wiO1xyXG4gICAgfVxyXG4gICAgc2F2ZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGltYWdlX3VybCA9IGltYWdlVGFnLmF0dHIoJ3NyYycpO1xyXG4gICAgICAgIHZhciBwcmlvcml0eSA9IHByaW9yaXR5VGFnLnZhbCgpO1xyXG4gICAgICAgIHZhciBsaW5rX3RvID0gbGlua1RvVGFnLnZhbCgpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ2ltYWdlX3VybCc6IGltYWdlX3VybCxcclxuICAgICAgICAgICAgICAgICdwcmlvcml0eSc6IHByaW9yaXR5LFxyXG4gICAgICAgICAgICAgICAgJ2xpbmtfdG8nOiBsaW5rX3RvLFxyXG4gICAgICAgICAgICAgICAgLy8g6Jm954S2QWRk55qERm9ybeS4reayoeacieWvuXBr6L+b6KGM5aSE55CG77yM5L2G5piv5Zyodmlld+S4reayoeacieaPkOWJjei/meS4quaVsOaNruaJgOS7peayoeacieWFs+ezu1xyXG4gICAgICAgICAgICAgICAgJ3BrJzogYmFubmVySWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIui9ruaSreWbvuS/ruaUueaIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJZCA9IHJlc3VsdFsnZGF0YSddWydiYW5uZXJfaWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcsIGJhbm5lcklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoXCLova7mkq3lm77mt7vliqDmiJDlip9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5U3Bhbi50ZXh0KFwi5LyY5YWI57qn77yaXCIgKyBwcmlvcml0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5sb2FkRGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAndXJsJzogJy9jbXMvYmFubmVyX2xpc3QvJyxcclxuICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBiYW5uZXJzID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJhbm5lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFubmVyID0gYmFubmVyc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZUJhbm5uZXJJdGVtKGJhbm5lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5BZGRCYW5uZXJFdmVudCgpO1xyXG4gICAgc2VsZi5sb2FkRGF0YSgpO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYmFubmVycyA9IG5ldyBCYW5uZXJzKCk7XHJcbiAgICBiYW5uZXJzLnJ1bigpO1xyXG59KTsiXX0=
