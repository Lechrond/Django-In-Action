function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),this.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:15*n.bannerCount+16*(n.bannerCount-1)+16})},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;this.bannerUl.stop().animate({left:-798*n.index},500);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},5e3)},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenBannerClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n+1,e.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerClick(),this.listenBannerHover(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this;i.loadBtn.click(function(){xfzajax.get({url:"/news/list/",data:{category_id:i.category_id,p:i.page},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page++}else i.loadBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this,n=$(".list-tab"),o=$(".list-inner-group");n.children().click(function(){var i=$(this),r=i.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:r,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t});o.empty(),o.append(e),a.page=2,a.category_id=r,i.addClass("active").siblings().removeClass("active"),a.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic3RvcCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuQmFubmVyQ2xpY2siLCJjbGljayIsImxpc3RlblBhZ2VDb250cm9sIiwiZWFjaCIsIm9iaiIsInJ1biIsImxpc3RlbkxvYWRNb3JlRXZlbnQiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwibmV3c2VzIiwiaHRtbCIsInRlbXBsYXRlIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsInRhYkdyb3VwIiwibmV3c0xpc3RHcm91cCIsImxpIiwiYXR0ciIsImVtcHR5Il0sIm1hcHBpbmdzIjoiQUFlQSxTQUFTQSxTQUVMQyxLQUFLQyxZQUFjLElBRW5CRCxLQUFLRSxZQUFjQyxFQUFFLGlCQUVyQkgsS0FBS0ksTUFBUSxFQUViSixLQUFLSyxVQUFZRixFQUFFLGVBRW5CSCxLQUFL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QUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUFXLENBQ3hCLElBQUlDLEVBQVNELEVBQWEsS0FDdEJFLEVBQU9DLFNBQVMsWUFBYSxDQUFDRixPQUFVQSxJQUU1Q0ssRUFBY0csUUFDZEgsRUFBYzFDLE9BQU9zQyxHQUNyQmhELEVBQUtDLEtBQU8sRUFDWkQsRUFBS0UsWUFBY0EsRUFDbkJtRCxFQUFHbkMsU0FBUyxVQUFVTyxXQUFXQyxZQUFZLFVBQzdDMUIsRUFBS0csUUFBUWtCLGNBUWpDdEIsTUFBTUssVUFBVWtDLElBQU0sV0FDUHBELEtBQ05xRCxzQkFETXJELEtBRU5nRSw2QkFHVDdELEVBQUUsWUFDZSxJQUFJSixRQUNWcUQsT0FFSyxJQUFJdkMsT0FDVnVDIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGZ1bmN0aW9uIEJhbm5lcigpIHtcclxuLy8gICAgIC8v55u45b2T5LqOcHl0aG9u5Lit55qEX19pbml0X1/mlrnms5VcclxuLy8gICAgIGNvbnNvbGUubG9nKFwi5p6E6YCg5Ye95pWwXCIpO1xyXG4vLyAgICAgLy/pgJrov4d0aGlz5YWz6ZSu5a2X57uR5a6a5bGe5oCnXHJcbi8vICAgICB0aGlzLnBlcnNvbiA9ICdsZWNocm9uZCc7XHJcbi8vIH1cclxuLy8gLy/nu5HlrprkuIDkuKrmlrnms5VcclxuLy8gQmFubmVyLnByb3RvdHlwZS5ncmVldCA9IGZ1bmN0aW9uICh3b3JkKSB7XHJcbi8vICAgICBjb25zb2xlLmxvZyhcImhlbGxvIHdvcmxkLCBcIix3b3JkKTtcclxuLy8gfVxyXG4vL1xyXG4vLyB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xyXG4vLyBjb25zb2xlLmxvZyhiYW5uZXIucGVyc29uKTtcclxuLy8gYmFubmVyLmdyZWV0KCdsZWNocm9uZCcpO1xyXG5cclxuZnVuY3Rpb24gQmFubmVyKCkge1xyXG4gICAgLy/ljZXkuKrova7mkq3lm77nmoTlrr3luqZcclxuICAgIHRoaXMuYmFubmVyV2lkdGggPSA3OTg7XHJcbiAgICAvL+aSreaUvui9ruaSreWbvueahOebkuWtkFxyXG4gICAgdGhpcy5iYW5uZXJHcm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xyXG4gICAgLy/lvZPliY3ova7liLDnmoTlm77niYdcclxuICAgIHRoaXMuaW5kZXggPSAxO1xyXG4gICAgLy/lt6bnrq3lpLRcclxuICAgIHRoaXMubGVmdEFycm93ID0gJChcIi5sZWZ0LWFycm93XCIpO1xyXG4gICAgLy/lj7Pnrq3lpLRcclxuICAgIHRoaXMucmlnaHRBcnJvdyA9ICQoXCIucmlnaHQtYXJyb3dcIik7XHJcbiAgICAvL+i9ruaSreWbvuWIl+ihqFxyXG4gICAgdGhpcy5iYW5uZXJVbCA9ICQoXCIjYmFubmVyLXVsXCIpO1xyXG4gICAgLy/ova7mkq3lm77nmoTpm4blkIhcclxuICAgIHRoaXMubGlMaXN0ID0gdGhpcy5iYW5uZXJVbC5jaGlsZHJlbihcImxpXCIpO1xyXG4gICAgLy/ova7mkq3lm77nmoTmlbDph49cclxuICAgIHRoaXMuYmFubmVyQ291bnQgPSB0aGlzLmxpTGlzdC5sZW5ndGg7XHJcbiAgICAvL+iOt+WPluWwj+eZveeCuVxyXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdmFyIGZpcnN0QmFubmVyID0gc2VsZi5saUxpc3QuZXEoMCkuY2xvbmUoKTtcclxuICAgIHZhciBsYXN0QmFubmVyID0gc2VsZi5saUxpc3QuZXEoc2VsZi5iYW5uZXJDb3VudCAtIDEpLmNsb25lKCk7XHJcbiAgICBzZWxmLmJhbm5lclVsLmFwcGVuZChmaXJzdEJhbm5lcik7XHJcbiAgICBzZWxmLmJhbm5lclVsLnByZXBlbmQobGFzdEJhbm5lcik7XHJcblxyXG4gICAgLy/liqjmgIHorr7nva7ova7mkq3lm77nmoTmgLvlrr3luqZcclxuICAgIHRoaXMuYmFubmVyVWwuY3NzKHtcclxuICAgICAgICBcIndpZHRoXCI6IHNlbGYuYmFubmVyV2lkdGggKiAoc2VsZi5iYW5uZXJDb3VudCArIDIpLFxyXG4gICAgICAgICdsZWZ0JzogLXNlbGYuYmFubmVyV2lkdGhcclxuICAgIH0pXHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5iYW5uZXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgLy/liJvlu7psaeagh+etvlxyXG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xyXG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XHJcbiAgICAgICAgLy/pu5jorqTmv4DmtLvnrKzkuIDkuKpcclxuICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8v6K6+572udWznmoTlrr3luqZcclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY3NzKHsnd2lkdGgnOiBzZWxmLmJhbm5lckNvdW50ICogMTUgKyAoc2VsZi5iYW5uZXJDb3VudCAtIDEpICogMTYgKyAyICogOH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS50b2dnbGVBcnJvdyA9IGZ1bmN0aW9uIChpc1Nob3cpIHtcclxuICAgIC8v5a6e546w6byg5qCH5oKs5YGc5pi+56S6566t5aS077yM56a75byA5raI5aSxXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAoaXNTaG93KSB7XHJcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuc2hvdygpO1xyXG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKTtcclxuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxufTtcclxuXHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+WunueOsOWbvueJh+i9ruaSreWIsOaMh+WumueahGluZGV4XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAvL+avj+asoei9ruaSreeahOenu+WKqOaXtumXtOS4ujUwMG1zXHJcbiAgICAvL+WFiOaKiuWFiOWJjeeahOWKqOeUu+WBnOatou+8jOmYsuatouWIh+WHuumhtemdouWGjeWIh+WbnuWQjuWPmOaIkOWPjOWAjemAn+W6plxyXG4gICAgdGhpcy5iYW5uZXJVbC5zdG9wKCkuYW5pbWF0ZSh7J2xlZnQnOiAtNzk4ICogc2VsZi5pbmRleH0sIDUwMCk7XHJcbiAgICB2YXIgaW5kZXggPSBzZWxmLmluZGV4O1xyXG4gICAgaWYgKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcclxuICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKSB7XHJcbiAgICAgICAgaW5kZXggPSAwO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpbmRleCA9IHNlbGYuaW5kZXggLSAxO1xyXG4gICAgfVxyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbignbGknKS5lcShpbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG59O1xyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8v5a6e546w6Ieq5Yqo5b6q546v6L2u5pKtXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAvL+WumuaXtuWZqO+8jOaXtumXtOmXtOmalDUwMDBtc1xyXG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA+PSBzZWxmLmJhbm5lckNvdW50ICsgMSkge1xyXG4gICAgICAgICAgICAvL+mBh+WIsOacgOWQjuaLvOaOpeeahOWbvueJh+Wwsei3s+i9rOWIsOWOn+Wni+eahOesrOS4gOW8oOWbvueJh++8jOS4jemHh+eUqOWKqOeUu+aViOaenFxyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7J2xlZnQnOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSwgNTAwMCk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvdmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy/nm5HlkKzpvKDmoIfnmoTmgqzlgZxcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL+aKium8oOagh+enu+S4iuWOu+eahOaXtuWAmeaJp+ihjFxyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHNlbGYudGltZXIpO1xyXG4gICAgICAgICAgICBzZWxmLnRvZ2dsZUFycm93KHRydWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL+aKium8oOagh+enu+i1sOeahOaXtuWAmeaJp+ihjFxyXG4gICAgICAgICAgICBzZWxmLmxvb3AoKTtcclxuICAgICAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSk7XHJcbiAgICAgICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVyQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+WunueOsOeCueWHu+eureWktOWIh+aNoui9ruaSreWbvlxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5bem566t5aS06YC76L6RXHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3MoeydsZWZ0JzogLXNlbGYuYmFubmVyQ291bnQgKiBzZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4LS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBzZWxmLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5Y+z566t5aS06YC76L6RXHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHsnbGVmdCc6IC1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+ebkeWQrOWwj+eZveeCueeahOS6i+S7tlxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbignbGknKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgb2JqKSB7XHJcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4ICsgMTtcclxuICAgICAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8v5Yid5aeL5YyW6L2u5pKt5Zu+XHJcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcclxuICAgIC8v5Yid5aeL5YyW5bCP55m954K5XHJcbiAgICB0aGlzLmluaXRQYWdlQ29udHJvbCgpO1xyXG4gICAgLy/lkK/liqjoh6rliqjova7mkq1cclxuICAgIHRoaXMubG9vcCgpO1xyXG4gICAgLy/lkK/liqjnm5HlkKzpvKDmoIfngrnlh7tcclxuICAgIHRoaXMubGlzdGVuQmFubmVyQ2xpY2soKTtcclxuICAgIC8v5ZCv5Yqo55uR5ZCs6byg5qCH5oKs5YGcXHJcbiAgICB0aGlzLmxpc3RlbkJhbm5lckhvdmVyKCk7XHJcbiAgICAvL+WQr+WKqOebkeWQrOWwj+eZveeCuVxyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gSW5kZXgoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgc2VsZi5jYXRlZ29yeV9pZCA9IDA7XHJcbiAgICBzZWxmLmxvYWRCdG4gPSAkKFwiI2xvYWQtbW9yZS1idG5cIik7XHJcblxyXG59XHJcblxyXG5JbmRleC5wcm90b3R5cGUubGlzdGVuTG9hZE1vcmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubG9hZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBzZWxmLmNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICAgJ3AnOiBzZWxmLnBhZ2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3c2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLCB7XCJuZXdzZXNcIjogbmV3c2VzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKGh0bWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UrKztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxufTtcclxuXHJcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHRhYkdyb3VwID0gJCgnLmxpc3QtdGFiJyk7XHJcbiAgICB2YXIgbmV3c0xpc3RHcm91cCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgIHRhYkdyb3VwLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsaSA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5X2lkID0gbGkuYXR0cihcImRhdGEtY2F0ZWdvcnlcIik7XHJcbiAgICAgICAgdmFyIHBhZ2UgPSAxO1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogY2F0ZWdvcnlfaWQsXHJcbiAgICAgICAgICAgICAgICAncCc6IHBhZ2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IHRlbXBsYXRlKFwibmV3cy1pdGVtXCIsIHtcIm5ld3Nlc1wiOiBuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbXB0eeaKiuW9k+WJjeagh+etvuS4i+eahOaJgOacieWtkOWFg+e0oOmDveWIoOmZpFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmFwcGVuZChodG1sKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSBjYXRlZ29yeV9pZDtcclxuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkQnRuLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuSW5kZXgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuTG9hZE1vcmVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50KCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcblxyXG4gICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XHJcbiAgICBpbmRleC5ydW4oKTtcclxufSk7Il19
